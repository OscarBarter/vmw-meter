/* Tolkien sillyness */
/* I blame marie */

unsigned char mellon[]={
	0x24,	/*   *  *   */
	0x0,	/*          */
	0x24,	/*   *  *   */
	0x0,	/*          */
	0x0,	/*          */
	0x1e,	/*    ****  */
	0x2,	/*       *  */
	0x2,	/*       *  */
	0x12,	/*    *  *  */
	0xc,	/*     **   */
	0x0,	/*          */
	0xc,	/*     **   */
	0x12,	/*    *  *  */
	0x10,	/*    *     */
	0xc,	/*     **   */
	0x12,	/*    *  *  */
	0x10,	/*    *     */
	0xe,	/*     ***  */
	0x10,	/*    *     */
	0x0,	/*          */
	0x1e,	/*    ****  */
	0x0,	/*          */
	0xe,	/*     ***  */
	0x12,	/*    *  *  */
	0x12,	/*    *  *  */
	0x12,	/*    *  *  */
	0xe,	/*     ***  */
	0x10,	/*    *     */
	0x0,	/*          */
	0x0,	/*          */
	0x0,	/*          */
	0x0,	/*          */
	0x0,	/*          */
	0x12,	/*    *  *  */
	0x12,	/*    *  *  */
	0x12,	/*    *  *  */
	0xc,	/*     **   */
	0x0,	/*          */
	0x0,	/*          */
	0x0,	/*          */
	0x0,	/*          */
	0x0,	/*          */
	0x1c,	/*    ***   */
	0x24,	/*   *  *   */
	0x24,	/*   *  *   */
	0x24,	/*   *  *   */
	0x1c,	/*    ***   */
	0x20,	/*   *      */
	0x0,	/*          */
	0x3c,	/*   ****   */
	0x4,	/*      *   */
	0x4,	/*      *   */
	0x24,	/*   *  *   */
	0x18,	/*    **    */
	0x0,	/*          */
	0x2c,	/*   * **   */
	0x24,	/*   *  *   */
	0x34,	/*   ** *   */
	0x28,	/*   * *    */
	0x20,	/*   *      */
	0x0,	/*          */
	0x2c,	/*   * **   */
	0x24,	/*   *  *   */
	0x34,	/*   ** *   */
	0x28,	/*   * *    */
	0x20,	/*   *      */
	0x0,	/*          */
	0x4,	/*      *   */
	0x8,	/*     *    */
	0x30,	/*   **     */
	0x28,	/*   * *    */
	0x4,	/*      *   */
	0x0,	/*          */
	0x1c,	/*    ***   */
	0x24,	/*   *  *   */
	0x24,	/*   *  *   */
	0x24,	/*   *  *   */
	0x1c,	/*    ***   */
	0x20,	/*   *      */
	0x0,	/*          */
	0x0,	/*          */
	0x0,	/*          */
	0x0,	/*          */
	0x0,	/*          */
	0x3c,	/*   ****   */
	0x4,	/*      *   */
	0x4,	/*      *   */
	0x24,	/*   *  *   */
	0x18,	/*    **    */
	0x0,	/*          */
	0x18,	/*    **    */
	0x24,	/*   *  *   */
	0x20,	/*   *      */
	0x18,	/*    **    */
	0x24,	/*   *  *   */
	0x20,	/*   *      */
	0x1f,	/*    ***** */
	0x20,	/*   *      */
	0x0,	/*          */
	0x4,	/*      *   */
	0x8,	/*     *    */
	0x30,	/*   **     */
	0x28,	/*   * *    */
	0x4,	/*      *   */
	0x0,	/*          */
	0x1c,	/*    ***   */
	0x24,	/*   *  *   */
	0x24,	/*   *  *   */
	0x24,	/*   *  *   */
	0x1f,	/*    ***** */
	0x20,	/*   *      */
};

unsigned char f_star[]={
	0xa,	/*     * *  */
	0x16,	/*    * **  */
	0x12,	/*    *  *  */
	0x12,	/*    *  *  */
	0x2,	/*       *  */
	0x7e,	/*  ******  */
	0x0,	/*          */
	0x49,	/*  *  *  * */
	0x2a,	/*   * * *  */
	0x1c,	/*    ***   */
	0x1c,	/*    ***   */
	0x7f,	/*  ******* */
	0x1c,	/*    ***   */
	0x1c,	/*    ***   */
	0x2a,	/*   * * *  */
	0x49,	/*  *  *  * */
};


unsigned char im_vince[]={
	0x24,	/*   *  *   */
	0x0,	/*          */
	0x24,	/*   *  *   */
	0x0,	/*          */
	0x0,	/*          */
	0x18,	/*    **    */
	0x24,	/*   *  *   */
	0x24,	/*   *  *   */
	0x20,	/*   *      */
	0x1f,	/*    ***** */
	0x20,	/*   *      */
	0x0,	/*          */
	0x18,	/*    **    */
	0x24,	/*   *  *   */
	0x20,	/*   *      */
	0x20,	/*   *      */
	0x1c,	/*    ***   */
	0x20,	/*   *      */
	0x0,	/*          */
	0x24,	/*   *  *   */
	0x24,	/*   *  *   */
	0x24,	/*   *  *   */
	0x18,	/*    **    */
	0x0,	/*          */
	0xfc,	/* ******   */
	0x4,	/*      *   */
	0x4,	/*      *   */
	0x24,	/*   *  *   */
	0x18,	/*    **    */
	0x0,	/*          */
	0x4,	/*      *   */
	0x8,	/*     *    */
	0x30,	/*   **     */
	0x28,	/*   * *    */
	0x4,	/*      *   */
	0x0,	/*          */
	0x0,	/*          */
	0x0,	/*          */
	0x0,	/*          */
	0x0,	/*          */
	0x1c,	/*    ***   */
	0x20,	/*   *      */
	0x20,	/*   *      */
	0x1c,	/*    ***   */
	0x20,	/*   *      */
	0x0,	/*          */
	0xa4,	/* * *  *   */
	0x24,	/*   *  *   */
	0xa4,	/* * *  *   */
	0x18,	/*    **    */
	0x0,	/*          */
	0x4,	/*      *   */
	0x8,	/*     *    */
	0x30,	/*   **     */
	0x28,	/*   * *    */
	0x4,	/*      *   */
	0x0,	/*          */
	0x0,	/*          */
	0x0,	/*          */
	0x0,	/*          */
	0x0,	/*          */
	0x18,	/*    **    */
	0x25,	/*   *  * * */
	0x22,	/*   *   *  */
	0x20,	/*   *      */
	0x18,	/*    **    */
	0x0,	/*          */
	0x18,	/*    **    */
	0x24,	/*   *  *   */
	0x20,	/*   *      */
	0x18,	/*    **    */
	0x24,	/*   *  *   */
	0x20,	/*   *      */
	0x1c,	/*    ***   */
	0x20,	/*   *      */
	0x0,	/*          */
	0x1c,	/*    ***   */
	0x24,	/*   *  *   */
	0x24,	/*   *  *   */
	0x9c,	/* *  ***   */
	0x24,	/*   *  *   */
	0x24,	/*   *  *   */
	0x1c,	/*    ***   */
	0x20,	/*   *      */
	0x0,	/*          */
	0x0,	/*          */
	0x0,	/*          */
	0x0,	/*          */
	0x0,	/*          */
	0x1c,	/*    ***   */
	0x24,	/*   *  *   */
	0x24,	/*   *  *   */
	0x24,	/*   *  *   */
	0x1c,	/*    ***   */
	0x20,	/*   *      */
	0x0,	/*          */
	0x3e,	/*   *****  */
	0x21,	/*   *    * */
};

unsigned char esse[]={
	0x24,	/*   *  *   */
	0x0,	/*          */
	0x0,	/*          */
	0x80,	/* *        */
	0x5c,	/*  * ***   */
	0x10,	/*    *     */
	0x0,	/*          */
	0x24,	/*   *  *   */
	0x12,	/*    *  *  */
	0x92,	/* *  *  *  */
	0x52,	/*  * *  *  */
	0x2c,	/*   * **   */
	0x0,	/*          */
	0x80,	/* *        */
	0x5c,	/*  * ***   */
	0x10,	/*    *     */
};

unsigned char avanierquetta[]={
	0x24,	/*   *  *   */
	0x0,	/*          */
	0x0,	/*          */
	0x48,	/*  *  *    */
	0x14,	/*    * *   */
	0x94,	/* *  * *   */
	0x11,	/*    *   * */
	0x4e,	/*  *  ***  */
	0x10,	/*    *     */
	0x0,	/*          */
	0x8,	/*     *    */
	0x14,	/*    * *   */
	0x14,	/*    * *   */
	0x11,	/*    *   * */
	0xe,	/*     ***  */
	0x10,	/*    *     */
	0x1,	/*        * */
	0x1e,	/*    ****  */
	0x90,	/* *  *     */
	0x54,	/*  * * *   */
	0x14,	/*    * *   */
	0x14,	/*    * *   */
	0x1c,	/*    ***   */
	0x0,	/*          */
	0x2,	/*       *  */
	0xc,	/*     **   */
	0x10,	/*    *     */
	0x10,	/*    *     */
	0x10,	/*    *     */
	0xe,	/*     ***  */
	0x10,	/*    *     */
	0x80,	/* *        */
	0x5e,	/*  * ****  */
	0x10,	/*    *     */
	0x0,	/*          */
	0xc,	/*     **   */
	0x12,	/*    *  *  */
	0x10,	/*    *     */
	0xc,	/*     **   */
	0x12,	/*    *  *  */
	0x10,	/*    *     */
	0xe,	/*     ***  */
	0x10,	/*    *     */
	0x0,	/*          */
	0x52,	/*  * *  *  */
	0x1e,	/*    ****  */
	0x92,	/* *  *  *  */
	0x12,	/*    *  *  */
	0x52,	/*  * *  *  */
	0x1c,	/*    ***   */
	0x0,	/*          */
	0x40,	/*  *       */
	0x0,	/*          */
	0x9e,	/* *  ****  */
	0x10,	/*    *     */
	0x40,	/*  *       */
};

unsigned char vaquetin[]={
	0x8e,	/* *   ***  */
	0xff,	/* ******** */
	0x71,	/*  ***   * */
	0x0,	/*          */
	0x0,	/*          */
	0xc,	/*     **   */
	0x12,	/*    *  *  */
	0x10,	/*    *     */
	0xc,	/*     **   */
	0x12,	/*    *  *  */
	0x10,	/*    *     */
	0xe,	/*     ***  */
	0x10,	/*    *     */
	0x0,	/*          */
	0x8,	/*     *    */
	0x14,	/*    * *   */
	0x54,	/*  * * *   */
	0x11,	/*    *   * */
	0xe,	/*     ***  */
	0x10,	/*    *     */
	0x1,	/*        * */
	0x1e,	/*    ****  */
	0x90,	/* *  *     */
	0x54,	/*  * * *   */
	0x14,	/*    * *   */
	0x14,	/*    * *   */
	0x1c,	/*    ***   */
	0x0,	/*          */
	0x12,	/*    *  *  */
	0x5e,	/*  * ****  */
	0x12,	/*    *  *  */
	0x92,	/* *  *  *  */
	0x12,	/*    *  *  */
	0x5c,	/*  * ***   */
};

unsigned char vins[]={
	0x1,	/*        * */
	0x2,	/*       *  */
	0x4,	/*      *   */
	0xf8,	/* *****    */
	0x4,	/*      *   */
	0x2,	/*       *  */
	0x1,	/*        * */
	0x0,	/*          */
	0x0,	/*          */
	0xe0,	/* ***      */
	0x10,	/*    *     */
	0x9,	/*     *  * */
	0x8,	/*     *    */
	0xff,	/* ******** */
	0x8,	/*     *    */
	0x9,	/*     *  * */
	0x10,	/*    *     */
	0xe0,	/* ***      */
	0x0,	/*          */
	0x0,	/*          */
	0xff,	/* ******** */
	0x0,	/*          */
	0x0,	/*          */
	0xff,	/* ******** */
	0x88,	/* *   *    */
	0x88,	/* *   *    */
	0x94,	/* *  * *   */
	0x52,	/*  * *  *  */
	0x61,	/*  **    * */
};

unsigned char frend[]={
	0xe3,	/* ***   ** */
	0x14,	/*    * *   */
	0x8,	/*     *    */
	0x8,	/*     *    */
	0xff,	/* ******** */
	0x8,	/*     *    */
	0x8,	/*     *    */
	0x14,	/*    * *   */
	0xe3,	/* ***   ** */
	0x0,	/*          */
	0x0,	/*          */
	0xff,	/* ******** */
	0x4,	/*      *   */
	0x18,	/*    **    */
	0x20,	/*   *      */
	0xff,	/* ******** */
	0x0,	/*          */
	0x0,	/*          */
	0x10,	/*    *     */
	0x20,	/*   *      */
	0x40,	/*  *       */
	0xff,	/* ******** */
	0x40,	/*  *       */
	0x20,	/*   *      */
	0x10,	/*    *     */
	0x0,	/*          */
	0x0,	/*          */
	0xff,	/* ******** */
	0x88,	/* *   *    */
	0x88,	/* *   *    */
	0x90,	/* *  *     */
	0x50,	/*  * *     */
	0x60,	/*  **      */
};


#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include <fcntl.h>
#include <errno.h>

#include <signal.h>

#include "display.h"



#define DISPLAY_SIZE	16
#define SPRITE_SIZE	4

static int display_type=DISPLAY_I2C;

static void quiet_and_exit(int sig) {

	if (display_type&DISPLAY_I2C) display_shutdown(DISPLAY_I2C);

	printf("Quieting and exiting\n");
	_exit(0);
}


#define FRAME_WIDTH 1024
static unsigned char framebuffer[FRAME_WIDTH];

int main(int arg, char **argv) {

	int i,result;

	/* Setup control-C handler to quiet the music   */
	/* otherwise if you force quit it keeps playing */
	/* the last tones */
	signal(SIGINT, quiet_and_exit);

	result=display_init(DISPLAY_I2C);
	if (result<0) {
		display_type=DISPLAY_TEXT;
	}

	/* clear framebuffer */
	for(i=0;i<16;i++) framebuffer[i]=0;

	display_8x16_vertical(display_type,framebuffer);

	sleep(1);

	/***************************/
	/* DISPLAY STARS OF FEANOR */
	/***************************/

	/* copy string to scroll to framebuffer */
	for(i=0;i<sizeof(f_star);i++) {
		framebuffer[sizeof(f_star)-i-1]=f_star[i];
	}
	display_8x16_vertical(display_type,framebuffer);

	sleep(1);

	/* clear framebuffer */
//	for(i=0;i<FRAME_WIDTH;i++) framebuffer[i]=0;

	/***************************/
	/* DISPLAY MADE_BY_VINCE   */
	/***************************/

	/* Im Vince hain echant. */

	/* copy string to scroll to framebuffer */
	for(i=0;i<sizeof(im_vince);i++) {
//		framebuffer[(FRAME_WIDTH-16)-i]=im_vince[(sizeof(im_vince)-1)-i];
		framebuffer[24+sizeof(im_vince)-i-1]=im_vince[i];
	}

	/* scroll */
	for(i=0;i<sizeof(im_vince)+40;i++) {
		display_8x16_vertical(display_type,framebuffer+i);
		usleep(100000);
	}

	/* clear framebuffer */
	for(i=0;i<FRAME_WIDTH;i++) framebuffer[i]=0;

	/* Quiet down the chips */
	display_shutdown(display_type);

	return 0;

}
